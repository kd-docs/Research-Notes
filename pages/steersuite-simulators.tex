\chapter{SteerSuite program and exetuce}

In order to complete the following section, you need to install docker~\cite{docker} and apptainer~\cite{apptainer} in a 
place you have root privilege. Also, you need to clone SteerSuite~\cite{kdresearch-steersuite} in your machine as well.

\section{Compile portable SteerSuite Application using apptainer}

\label{sec:steersuite-compile}
To compile SteerSuite program without CogAI scenarios, comment out \verb"WITH_COGAI" marco from build/premake.lua.ÓÅÜ

\begin{minted}{diff}
--- a/build/premake4-dev.lua
+++ b/build/premake4-dev.lua
@@ -177,7 +177,7 @@ project "scenario"
    
    buildoptions("-std=c++0x -ggdb" )   
-   defines { "WITH_COGAI" }
+   -- defines { "WITH_COGAI" }
 
 project "acclmesh"
    language "C++"
\end{minted}

Then sif file can be generated by \mintinline{bash}{Makefile} under steersuite root directory with
\mint{bash}{make steersuite.sif}.
You will need to input sudo password while apptianer writing out the sif file.

Also the compilation of steersuite program can be done in same time, using following command
\mint{bash}{make singularity-compile}

\section{Compile SteerSuite with CogAI enabled}

You will also need CogAI~\cite{kdresearch-cogai} cloned into your local system. CogAI lib is linked to SteerSuite in 
runtime so no need to compile CogAI unless you are using them in scenarios. CogAI headers, though, are required to build 
a steersuite binary with CogAI enabled. CogAI should be installed to steersuite with

\begin{minted}{bash}
ln -s "/path/to/CogAI/root" "/${STEERSUITE_ROOT}/build/cog-ai" 
\end{minted}

Then, follow the compilation instructions described in \fref{sec:steersuite-compile}.

\section{Prepare to compile CogAI library}

In order to install CogAI in your computer, you need to clone SteerSuite and CogAI repository to a local folder. Then 
create a symbol link of SteerSuite repository to CogAI's external folder. Using command:
\begin{minted}{bash}
ln -s /path/to/steersuite/root external/steersuite
\end{minted}

Then compile in using makefile in the root directory. In case to compile it within an apptainer container, see 
\fref{sec:cogai-apptainer}

\section{Run a simulation with CogAI}

\textit{note}: Now \mintinline{bash}{make install} is supported to install so file into lib directory.

To perform a simulation with CogAI, you should do one of the following installation steps:

\begin{enumerate}
  \item copy the compiled \mintinline{bash}{libcog-ai.so} into steersuite's library folder.
  \item add the path name containing \mintinline{bash}{libcog-ai.so} into steersuite's configuration file.
\end{enumerate}

Then add \mintinline{bash}{-ai cog-ai} if using testcase player with steersuite, or load a preset scenario with cogai 
integrated directory in scenarion model.

\section{Run command using apptainer}
\label{sec:cogai-apptainer}
Following functions can be used to ease the apptainer development experience.

Definition file: \textattachfile{attachments/steersuite-container-functions.sh}{\textcolor{blue}{open}}

\textit{note}: the config file used in this function is the same as defined in \fref{sec:steersim-config}.

\printbibliography
